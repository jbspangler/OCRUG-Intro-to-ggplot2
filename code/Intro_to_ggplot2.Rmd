---
title: "Introduction to ggplot2"
subtitle: "(and a little tidyverse)"
author: "Jacob Spangler"
date: "`r Sys.Date()`"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

# Overview

  - What is ggplot2?
  - Review plotting
  - Utility of ggplot2
  - Exploring data
  - Conclusions
  
---

# What is ggplot2?

![](http://static1.squarespace.com/static/58ae4af3414fb53937b7619e/5bcf38c5eef1a1d9fe7b884f/5beae66c40ec9a5c157d6c35/1542121257177/ggplot2.png?format=1500w)

--

**ggplot2** is a system for declaratively creating graphics, based on The Grammar of Graphics. You provide the data, tell **ggplot2** how to map variables to aesthetics, what graphical primitives to use, and it takes care of the details.

---

# Iris Data

```{r, echo=F}

library(tidyverse)
Iris_Data <- iris %>% as.tbl()

Iris_Data

```

---

# Base R Plots

.pull-left[

Scatterplot

```{r, fig.height=4, fig.width=4}

plot(Iris_Data$Sepal.Length, Iris_Data$Sepal.Width)

```

]

.pull-right[

Histogram

```{r, fig.height=4, fig.width=4}

hist(Iris_Data$Sepal.Length)

```

]

---

# How to install?

```{r eval=F, tidy=F}

# The easiest way to get ggplot2 is to install the whole tidyverse:
install.packages("tidyverse")

# Alternatively, install just ggplot2:
install.packages("ggplot2")

# Or the the development version from GitHub:
# install.packages("devtools")
devtools::install_github("tidyverse/ggplot2")

```

---

# Scatterplots in ggplot2

```{r, fig.height=5, fig.width=5}

ggplot(Iris_Data, aes(x=Sepal.Length, y=Sepal.Width)) +
  geom_point()

```

---

# Options for ggplot2 Scatterplots


.pull-left[

- Add a diagonal line

```{r, fig.height=4, fig.width=4}

ggplot(Iris_Data, aes(x=Sepal.Length, y=Sepal.Width)) +
  geom_point() +
  geom_abline()

```

]

.pull-right[

- Add color

```{r, fig.height=4, fig.width=4}

ggplot(Iris_Data, aes(x=Sepal.Length, y=Sepal.Width,
                      color=Species)) +
  geom_point() +
  geom_abline()

```

]

---

# Histograms in ggplot2

```{r, fig.height=5, fig.width=5, warning=F, message=F}

ggplot(Iris_Data, aes(x=Sepal.Length)) +
  geom_histogram()

```

---

# Options for ggplot2 Histograms

.pull-left[

- Outline the bins
- Set bin sizes

```{r, fig.height=4, fig.width=4}

ggplot(Iris_Data, aes(x=Sepal.Length)) +
  geom_histogram(color="black", binwidth = 0.2)

```

]


.pull-right[

- Facet histograms by other variables
- Remove Legend

```{r, fig.height=4, fig.width=4}

ggplot(Iris_Data, aes(x=Sepal.Length, fill=Species)) +
  geom_histogram(color="black", binwidth = 0.2) +
  facet_wrap(~Species, ncol=1) +
  theme(legend.position = "none")

```

]

---

# DataFest Dataset

```{r, echo=F}

Example_Data <- read_csv("../data/raw/Public Potable Water Systems FINAL 06-22-2018_0.csv",
                         col_types = cols())

```

- What about example data set?
  - There are **`r nrow(Example_Data)`** rows
  - There are **`r ncol(Example_Data)`** columns

---

# DataFest Scatterplot

```{r, fig.height=4, fig.width=6, warning=F, message=F}

ggplot(Example_Data, aes(x=`Residential Population`, 
                         y=`Number of COMBINED Service Connections (CB)`)) +
  geom_point(alpha=0.4) +
  scale_x_continuous(labels = scales::comma) +
  scale_y_continuous(labels = scales::comma)

```

---

# DataFest Histogram

```{r, fig.height=4, fig.width=6, warning=F, message=F}

ggplot(Example_Data, aes(x=`Residential Population`)) +
  geom_histogram(color="black") +
  scale_x_continuous(labels = scales::comma)

```

---

# References

- [xaringan](https://github.com/yihui/xaringan)
- [tidyverse](https://www.tidyverse.org/)

